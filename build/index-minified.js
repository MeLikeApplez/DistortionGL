var W=class{children;enabled;loaded;ready;constructor(){this.children=[],this.enabled=!0,this.loaded=!1,this.ready=!1}add(t){this.children.push(...t)}remove(t){for(let s=0;s<t.length;s++){let e=t[s],r=this.children.findIndex(i=>i.uuid===e.uuid);r!==-1&&this.children.splice(r,1)}}};var A=class{canvasElement;ready;constructor(t){this.canvasElement=t,this.ready=!1}setSize(t,s,e=1){this.canvasElement.width=t*e,this.canvasElement.height=s*e}render(t,s){if(t.ready)t.render(this,s);else{if(t.loaded)return;t.load(this,s),t.loaded=!0}}};var $=class extends A{gl;constructor(t,s={}){super(t),this.gl=t.getContext("webgl2",s),this.ready=this.gl instanceof WebGL2RenderingContext}render(t,s){if(!this.ready)throw Error("WebGL2 is unavailable for this device!");this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.viewport(0,0,this.canvasElement.width,this.canvasElement.height),super.render(t,s)}};var N=class extends A{constructor(t){super(t)}render(t,s){throw Error("WebGPU Renderer has not been implemented!")}};var J=class extends A{ctx;clipSpace;constructor(t,s){super(t),this.ctx=t.getContext("2d",s),this.clipSpace=s.clipSpace,this.ready=this.ctx instanceof CanvasRenderingContext2D}render(t,s){if(!this.ready)throw Error("Canvas 2D is unavailable for this device!");this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,s.width,s.height);let e=s.projectionMatrix;this.ctx.setTransform(e[0],e[3],e[1],e[4],e[2],e[5]),super.render(t,s)}};var q=class o{x;y;z;w;constructor(t=0,s=0,e=0,r=0){this.x=t,this.y=s,this.z=e,this.w=r}set(t,s,e,r){return this.x=t,this.y=s,this.z=e,this.w=r,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}subtractScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}divideScalar(t){return this.x/=t,this.y/=t,this.z/=t,this.w/=t,this}distanceTo(t){let s=t.x-this.x,e=t.y-this.y,r=t.z-this.z,i=t.w-this.w;return Math.sqrt(s*s+e*e+r*r+i*i)}distanceToSquared(t){let s=t.x-this.x,e=t.y-this.y,r=t.z-this.z,i=t.w-this.w;return s*s+e*e+r*r+i*i}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}clamp(t,s){return this.x=Math.max(t.x,Math.min(this.x,s.x)),this.y=Math.max(t.y,Math.min(this.y,s.y)),this.z=Math.max(t.z,Math.min(this.z,s.z)),this.w=Math.max(t.w,Math.min(this.w,s.w)),this}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return t===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x/=t,this.y/=t,this.z/=t,this.w/=t),this}applyFromMatrix4(t){let{x:s,y:e,z:r,w:i}=this;return this.x=t[0]*s+t[1]*e+t[2]*r+t[3]*i,this.y=t[4]*s+t[5]*e+t[6]*r+t[7]*i,this.z=t[8]*s+t[9]*e+t[10]*r+t[11]*i,this.w=t[12]*s+t[13]*e+t[14]*r+t[15]*i,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}toArray(){return[this.x,this.y,this.z,this.w]}fromArray(t){return this.x=t[0],this.y=t[1],this.z=t[2],this.w=t[3],this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:return 0}}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}clone(){return new o(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}};var T=class{_listeners;constructor(t){if(this._listeners=new Map,Array.isArray(t))for(let s=0;s<t.length;s++)this._listeners.set(t[s],[])}dispatchEvent(t,s){let e=this._listeners.get(t);if(!Array.isArray(e))return this._listeners.set(t,[]),!1;for(let r=0;r<e.length;r++){let i=e[r];i(s)}return!0}addEventListener(t,s){let e=this._listeners.get(t);if(!e)throw Error(`Unable to find event event name: "${String(t)}"`);if(typeof s!="function")throw Error("Callback function is required!");e.push(s)}};var tt=class extends T{animationId;startTime;fps;deltaTime;constructor(){super(["onstart","onstop","onupdate"]),this.animationId=-1,this.startTime=-1,this.fps=0,this.deltaTime=0}start(){return this.startTime=-1,this.animationId=window.requestAnimationFrame(this.update.bind(this)),this.dispatchEvent("onstart",this),this.animationId}stop(){return window.cancelAnimationFrame(this.animationId),this.animationId=-1,this.startTime=-1,this.dispatchEvent("onstop",this),this.animationId}update(t){if(this.animationId=window.requestAnimationFrame(this.update.bind(this)),this.startTime===-1){this.startTime=t;return}this.deltaTime=(t-this.startTime)/1e3,this.fps=1/this.deltaTime,this.startTime=t,this.dispatchEvent("onupdate",this)}};var G=class o{x;y;z;w;constructor(t=0,s=0,e=0,r=1){this.x=t,this.y=s,this.z=e,this.w=r}set(t,s,e,r){return this.x=t,this.y=s,this.z=e,this.w=r,this}setFromEuler(t){let{a:s,b:e,c:r}=t.getEulerByOrder(),i=Math.sin(s/2),n=Math.sin(e/2),h=Math.sin(r/2),c=Math.cos(s/2),a=Math.cos(e/2),m=Math.cos(r/2);return this.x=c*a*m+i*n*h,this.y=i*a*m-c*n*h,this.z=c*n*m+i*a*h,this.w=c*a*h-i*n*m,this}setFromAxisAngle(t,s){let e=s*.5,r=Math.sin(e);return new o(t.x*r,t.y*r,t.z*r,Math.cos(e))}identity(){return this.set(0,0,0,1),this}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return t===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x/=t,this.y/=t,this.z/=t,this.w/=t),this}conjugate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=this.w,this}multiply(t){return this.x=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,this.y=this.w*t.y-this.x*t.z+this.y*t.w+this.z*t.x,this.z=this.w*t.z+this.x*t.y-this.y*t.x+this.z*t.w,this.w=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z,this}clone(){return new o(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}};var z=class o{x;y;z;constructor(t=0,s=0,e=0){this.x=t,this.y=s,this.z=e}static UP=new o(0,1,0);set(t,s,e){return this.x=t,this.y=s,this.z=e,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}subtractScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}divideScalar(t){return this.x/=t,this.y/=t,this.z/=t,this}distanceTo(t){let s=t.x-this.x,e=t.y-this.y,r=t.z-this.z;return Math.sqrt(s*s+e*e+r*r)}distanceToSquared(t){let s=t.x-this.x,e=t.y-this.y,r=t.z-this.z;return s*s+e*e+r*r}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}clamp(t,s){return this.x=Math.max(t.x,Math.min(this.x,s.x)),this.y=Math.max(t.y,Math.min(this.y,s.y)),this.z=Math.max(t.z,Math.min(this.z,s.z)),this}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return t===0?(this.x=0,this.y=0,this.z=0):(this.x/=t,this.y/=t,this.z/=t),this}applyFromMatrix3(t){let{x:s,y:e,z:r}=this;return this.x=t[0]*s+t[1]*e+t[2]*r,this.y=t[3]*s+t[4]*e+t[5]*r,this.z=t[6]*s+t[7]*e+t[8]*r,this}applyQuaternion(t){let s=2*(t.x*this.y-t.w*this.x+t.y*this.z),e=2*(t.y*this.x-t.w*this.y+t.x*this.z),r=2*(t.z*this.x-t.w*this.z-t.x*this.y);return this.x=s,this.y=e,this.z=r,this}applyEuler(t){let s=new G().setFromEuler(t);return this.applyQuaternion(s)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return new o(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}setFromCylindricalCoordinates(t,s,e){return this.x=t*Math.sin(e)*Math.cos(s),this.y=t*Math.sin(e)*Math.sin(s),this.z=t*Math.cos(e),this}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}toArray(){return[this.x,this.y,this.z]}fromArray(t){return this.x=t[0],this.y=t[1],this.z=t[2],this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:return 0}}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}clone(){return new o(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}};var M=class o{x;y;constructor(t=0,s=0){this.x=t,this.y=s}set(t,s){return this.x=t,this.y=s,this}add(t){return this.x+=t.x,this.y+=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}divide(t){return this.x/=t.x,this.y/=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}subtractScalar(t){return this.x-=t,this.y-=t,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divideScalar(t){return this.x/=t,this.y/=t,this}distanceTo(t){let s=t.x-this.x,e=t.y-this.y;return Math.sqrt(s*s+e*e)}distanceToSquared(t){let s=t.x-this.x,e=t.y-this.y;return s*s+e*e}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}clamp(t,s){return this.x=Math.max(t.x,Math.min(this.x,s.x)),this.y=Math.max(t.y,Math.min(this.y,s.y)),this}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y);return t===0?(this.x=0,this.y=0):(this.x/=t,this.y/=t),this}dot(t){return this.x*t.x+this.y*t.y}equals(t){return this.x===t.x&&this.y===t.y}rotateAround(t,s){let e=Math.cos(s),r=Math.sin(s),i=this.x-t.x,n=this.y-t.y;return this.x=i*e-n*r+t.x,this.y=i*r+n*e+t.y,this}toArray(){return[this.x,this.y]}fromArray(t){return this.x=t[0],this.y=t[1],this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:return 0}}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}clone(){return new o(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}};var P=class o extends Array{constructor(t=1,s=0,e=0,r=0,i=0,n=1,h=0,c=0,a=0,m=0,u=1,d=0,p=0,x=0,y=0,l=1){super(16),this[0]=t,this[1]=s,this[2]=e,this[3]=r,this[4]=i,this[5]=n,this[6]=h,this[7]=c,this[8]=a,this[9]=m,this[10]=u,this[11]=d,this[12]=p,this[13]=x,this[14]=y,this[15]=l}set(t,s,e,r,i,n,h,c,a,m,u,d,p,x,y,l){return this[0]=t,this[1]=s,this[2]=e,this[3]=r,this[4]=i,this[5]=n,this[6]=h,this[7]=c,this[8]=a,this[9]=m,this[10]=u,this[11]=d,this[12]=p,this[13]=x,this[14]=y,this[15]=l,this}setFromMatrix4(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}makeTranslation(t,s,e){return this.set(1,0,0,t,0,1,0,s,0,0,1,e,0,0,0,1),this}translate(t,s,e){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,t,s,e,1),this}makeScale(t,s,e){return this.set(t,0,0,0,0,s,0,0,0,0,e,0,0,0,0,1),this}makeRotationX(t){let s=Math.sin(t),e=Math.cos(t);return this.set(1,0,0,0,0,e,-s,0,0,s,e,0,0,0,0,1),this}makeRotationY(t){let s=Math.sin(t),e=Math.cos(t);return this.set(e,0,s,0,0,1,0,0,-s,0,e,0,0,0,0,1),this}makeRotationZ(t){let s=Math.sin(t),e=Math.cos(t);return this.set(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationFromEuler(t){let{s1:s,s2:e,s3:r,c1:i,c2:n,c3:h}=t.getEulerByOrderTrig();switch(t.order){case"XZX":return this.set(n,-h*e,e*r,0,i*e,i*n*h-s*r,-h*s-i*n*r,0,s*e,i*r+n*h*s,i*h-n*s*r,0,0,0,0,1);case"XYX":return this.set(n,e*r,h*e,0,s*e,i*h-n*s*r,-(i*r)-n*h*s,0,-i*e,h*s+i*n*r,i*n*h-s*r,0,0,0,0,1);case"YXY":return this.set(i*h-n*s*r,s*e,i*r+n*h*s,0,e*r,n,-h*e,0,-h*s- -i*n*r,i*e,i*n*h-s*r,0,0,0,0,1);case"YZY":return this.set(i*n*h-s*r,-i*e,h*s+i*n*r,0,h*e,n,e*r,0,-i*r-n*h*s,s*e,i*h-n*s*r,0,0,0,0,1);case"ZYZ":return this.set(i*n*h-s*r,-h*s-i*n*r,i*e,0,i*r+n*h*s,i*h-n*s*r,s*e,0,-h*e,e*r,n,0,0,0,0,1);case"ZXZ":return this.set(i*h-n*s*r,-i*r-n*h*s,s*e,0,h*s+i*n*r,i*n*h-s*r,-i*e,0,e*r,h*e,n,0,0,0,0,1);case"XZY":return this.set(n*h,-e,n*r,0,s*r+i*h*e,i*n,i*e*r-h*s,0,h*s*e-i*r,n*s,i*h+s*e*r,0,0,0,0,1);case"XYZ":return this.set(n*h,-n*r,e,0,i*r+h*s*e,i*h-s*e*r,-n*s,0,s*r-i*h*e,h*s+i*e*r,i*n,0,0,0,0,1);case"YXZ":return this.set(i*h+s*e*r,h*s*e-i*r,n*s,0,n*r,n*h,-e,0,i*e*r-h*s,i*h*e+s*r,i*n,0,0,0,0,1);case"YZX":return this.set(i*n,s*r-i*h*e,h*s+i*e*r,0,e,n*h,-n*r,0,-n*s,i*r+h*s*e,i*h-s*e*r,0,0,0,0,1);case"ZYX":return this.set(i*n,i*e*r-h*s,s*r+i*h*e,0,n*s,i*h+s*e*r,h*s*e-i*r,0,-e,n*r,n*h,0,0,0,0,1);case"ZXY":return this.set(i*h-s*e*r,-i*s,i*r+h*s*e,0,h*s+i*e*r,i*n,s*r-i*h*e,0,-n*r,e,n*h,0,0,0,0,1)}return null}makeRotationFromQuaternion(t){let s=t.x*t.x,e=t.y*t.y,r=t.z*t.z,i=t.x*t.y,n=t.x*t.z,h=t.y*t.z,c=t.x*t.w,a=t.y*t.w,m=t.z*t.w,u=1-(2*e-2*r),d=2*i-2*m,p=2*n+2*a,x=2*i+2*m,y=1-(2*s-2*r),l=2*h-2*c,f=2*n-2*a,g=2*h+2*c,w=1-(2*s-2*e);return this.set(u,d,p,0,x,y,l,0,f,g,w,0,0,0,0,1)}multiply(t){return this.multiplyMatrices(this,t),this}multiplyMatrices(t,s){let e=t,r=s,i=this,n=e[0],h=e[4],c=e[8],a=e[12],m=e[1],u=e[5],d=e[9],p=e[13],x=e[2],y=e[6],l=e[10],f=e[14],g=e[3],w=e[7],v=e[11],S=e[15],E=r[0],C=r[4],U=r[8],k=r[12],F=r[1],O=r[5],D=r[9],I=r[13],Z=r[2],_=r[6],j=r[10],H=r[14],X=r[3],Y=r[7],B=r[11],K=r[15];return i[0]=n*E+h*F+c*Z+a*X,i[4]=n*C+h*O+c*_+a*Y,i[8]=n*U+h*D+c*j+a*B,i[12]=n*k+h*I+c*H+a*K,i[1]=m*E+u*F+d*Z+p*X,i[5]=m*C+u*O+d*_+p*Y,i[9]=m*U+u*D+d*j+p*B,i[13]=m*k+u*I+d*H+p*K,i[2]=x*E+y*F+l*Z+f*X,i[6]=x*C+y*O+l*_+f*Y,i[10]=x*U+y*D+l*j+f*B,i[14]=x*k+y*I+l*H+f*K,i[3]=g*E+w*F+v*Z+S*X,i[7]=g*C+w*O+v*_+S*Y,i[11]=g*U+w*D+v*j+S*B,i[15]=g*k+w*I+v*H+S*K,this}multiplyScalar(t){for(let s=0;s<this.length;s++)this[s]*=t;return this}inverse(){let s=new o,e=this;s[0]=e[5]*e[10]*e[15]-e[5]*e[14]*e[11]-e[6]*e[9]*e[15]+e[6]*e[13]*e[11]+e[7]*e[9]*e[14]-e[7]*e[13]*e[10],s[1]=-e[1]*e[10]*e[15]+e[1]*e[14]*e[11]+e[2]*e[9]*e[15]-e[2]*e[13]*e[11]-e[3]*e[9]*e[14]+e[3]*e[13]*e[10],s[2]=e[1]*e[6]*e[15]-e[1]*e[14]*e[7]-e[2]*e[5]*e[15]+e[2]*e[13]*e[7]+e[3]*e[5]*e[14]-e[3]*e[13]*e[6],s[3]=-e[1]*e[6]*e[11]+e[1]*e[10]*e[7]+e[2]*e[5]*e[11]-e[2]*e[9]*e[7]-e[3]*e[5]*e[10]+e[3]*e[9]*e[6],s[4]=-e[4]*e[10]*e[15]+e[4]*e[14]*e[11]+e[6]*e[8]*e[15]-e[6]*e[12]*e[11]-e[7]*e[8]*e[14]+e[7]*e[12]*e[10],s[5]=e[0]*e[10]*e[15]-e[0]*e[14]*e[11]-e[2]*e[8]*e[15]+e[2]*e[12]*e[11]+e[3]*e[8]*e[14]-e[3]*e[12]*e[10],s[6]=-e[0]*e[6]*e[15]+e[0]*e[14]*e[7]+e[2]*e[4]*e[15]-e[2]*e[12]*e[7]-e[3]*e[4]*e[14]+e[3]*e[12]*e[6],s[7]=e[0]*e[6]*e[11]-e[0]*e[10]*e[7]-e[2]*e[4]*e[11]+e[2]*e[8]*e[7]+e[3]*e[4]*e[10]-e[3]*e[8]*e[6],s[8]=e[4]*e[9]*e[15]-e[4]*e[13]*e[11]-e[5]*e[8]*e[15]+e[5]*e[12]*e[11]+e[7]*e[8]*e[13]-e[7]*e[12]*e[9],s[9]=-e[0]*e[9]*e[15]+e[0]*e[13]*e[11]+e[1]*e[8]*e[15]-e[1]*e[12]*e[11]-e[3]*e[8]*e[13]+e[3]*e[12]*e[9],s[10]=e[0]*e[5]*e[15]-e[0]*e[13]*e[7]-e[1]*e[4]*e[15]+e[1]*e[12]*e[7]+e[3]*e[4]*e[13]-e[3]*e[12]*e[5],s[11]=-e[0]*e[5]*e[11]+e[0]*e[9]*e[7]+e[1]*e[4]*e[11]-e[1]*e[8]*e[7]-e[3]*e[4]*e[9]+e[3]*e[8]*e[5],s[12]=-e[4]*e[9]*e[14]+e[4]*e[13]*e[10]+e[5]*e[8]*e[14]-e[5]*e[12]*e[10]-e[6]*e[8]*e[13]+e[6]*e[12]*e[9],s[13]=e[0]*e[9]*e[14]-e[0]*e[13]*e[10]-e[1]*e[8]*e[14]+e[1]*e[12]*e[10]+e[2]*e[8]*e[13]-e[2]*e[12]*e[9],s[14]=-e[0]*e[5]*e[14]+e[0]*e[13]*e[6]+e[1]*e[4]*e[14]-e[1]*e[12]*e[6]-e[2]*e[4]*e[13]+e[2]*e[12]*e[5],s[15]=e[0]*e[5]*e[10]-e[0]*e[9]*e[6]-e[1]*e[4]*e[10]+e[1]*e[8]*e[6]+e[2]*e[4]*e[9]-e[2]*e[8]*e[5];let r=e[0]*s[0]+e[1]*s[4]+e[2]*s[8]+e[3]*s[12];for(var i=0;i<16;i++)s[i]/=r;return this.set(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],s[12],s[13],s[14],s[15]),this}compose(t,s,e){let r=this,i=s.x,n=s.y,h=s.z,c=s.w,a=i+i,m=n+n,u=h+h,d=i*a,p=i*m,x=i*u,y=n*m,l=n*u,f=h*u,g=c*a,w=c*m,v=c*u,S=e.x,E=e.y,C=e.z;return r[0]=(1-(y+f))*S,r[1]=(p+v)*S,r[2]=(x-w)*S,r[3]=0,r[4]=(p-v)*E,r[5]=(1-(d+f))*E,r[6]=(l+g)*E,r[7]=0,r[8]=(x+w)*C,r[9]=(l-g)*C,r[10]=(1-(d+y))*C,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}clone(){return new o(...this)}copy(t){return this.set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}};var L=class o extends Array{constructor(t=1,s=0,e=0,r=0,i=1,n=0,h=0,c=0,a=1){super(9),this[0]=t,this[1]=s,this[2]=e,this[3]=r,this[4]=i,this[5]=n,this[6]=h,this[7]=c,this[8]=a}set(t,s,e,r,i,n,h,c,a){return this[0]=t,this[1]=s,this[2]=e,this[3]=r,this[4]=i,this[5]=n,this[6]=h,this[7]=c,this[8]=a,this}setFromMatrix3(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}makeRotation(t){let s=Math.sin(t),e=Math.cos(t);return this.set(e,-s,0,s,e,0,0,0,1),this}makeTranslation(t,s){return this.set(1,0,t,0,1,s,0,0,1),this}translate(t,s){return this.set(1,0,0,0,1,0,t,s,1),this}makeScale(t,s){return this.set(t,0,0,0,s,0,0,0,1),this}multiply(t){return this.multiplyMatrices(this,t),this}multiplyMatrices(t,s){let e=t,r=s,i=this,n=e[0],h=e[3],c=e[6],a=e[1],m=e[4],u=e[7],d=e[2],p=e[5],x=e[8],y=r[0],l=r[3],f=r[6],g=r[1],w=r[4],v=r[7],S=r[2],E=r[5],C=r[8];return i[0]=n*y+h*g+c*S,i[3]=n*l+h*w+c*E,i[6]=n*f+h*v+c*C,i[1]=a*y+m*g+u*S,i[4]=a*l+m*w+u*E,i[7]=a*f+m*v+u*C,i[2]=d*y+p*g+x*S,i[5]=d*l+p*w+x*E,i[8]=d*f+p*v+x*C,this}multiplyScalar(t){for(let s=0;s<this.length;s++)this[s]*=t;return this}inverse(){let[t,s,e,r,i,n,h,c,a]=this,m=i*a-c*n,u=n*h-r*a,d=r*c-h*i;return t*m+s*u+e*d===0?null:(this.set(m,e*c-s*a,s*n-e*i,u,t*a-e*h,r*e-t*n,d,h*s-t*c,t*i-r*s),this)}compose(t,s,e){let r=Math.sin(s),i=Math.cos(s);return this.set(i*e.x,-r*e.y,t.x,r*e.x,i*e.y,t.y,0,0,1),this}clone(){return new o(...this)}copy(t){return this.set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]),this}};function ce(o,t){return Math.floor(Math.random()*(t-o+1)+o)}function me(o,t){return Math.random()*(t-o)+o}function ue(o,t,s){return t<o?o:t>s?s:t}function de(o,t,s){return o+(t-o)*s}var b=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function et(){let o=Math.random()*4294967295|0,t=Math.random()*4294967295|0,s=Math.random()*4294967295|0,e=Math.random()*4294967295|0;return b[o&255]+b[o>>8&255]+b[o>>16&255]+b[o>>24&255]+"-"+b[t&255]+b[t>>8&255]+"-"+b[t>>16&15|64]+b[t>>24&255]+"-"+b[s&63|128]+b[s>>8&255]+"-"+b[s>>16&255]+b[s>>24&255]+b[e&255]+b[e>>8&255]+b[e>>16&255]+b[e>>24&255]}function le(o,t){let s=o.constructor,e=s(o.length*t);for(let r=0;r<t;r++)for(let i=0;i<o.length;i++)e[o.length*r+i]=o[i];return e}var Q=class o{x;y;z;order;constructor(t=0,s=0,e=0){this.x=t,this.y=s,this.z=e,this.order="XYZ"}set(t,s,e,r){return this.x=t,this.y=s,this.z=e,this.order=r||"XYZ",this}setFromQuaternion(t){let s=2*(t.w*t.x+t.y*t.z),e=1-2*(t.x*t.x+t.y*t.y);this.x=Math.atan2(s,e);let r=2*(t.w*t.y-t.x*t.z),i=Math.sqrt(1+r),n=Math.sqrt(1-r);this.y=2*Math.atan2(i,n)-Math.PI/2;let h=2*(t.w*t.z+t.x*t.y),c=1-2*(t.y*t.y+t.z*t.z);return this.z=Math.atan2(h,c),this}getEulerByOrder(){let t=this.order[0]==="X"?this.x:this.order[0]==="Y"?this.y:this.order[0]==="Z"?this.z:0,s=this.order[1]==="X"?this.x:this.order[1]==="Y"?this.y:this.order[1]==="Z"?this.z:0,e=this.order[2]==="X"?this.x:this.order[2]==="Y"?this.y:this.order[2]==="Z"?this.z:0;return{a:t,b:s,c:e}}getEulerByOrderTrig(){let{a:t,b:s,c:e}=this.getEulerByOrder(),r=Math.sin(t),i=Math.sin(s),n=Math.sin(e),h=Math.cos(t),c=Math.cos(s),a=Math.cos(e);return{s1:r,s2:i,s3:n,c1:h,c2:c,c3:a}}setFromRotationMatrix(t){return this.x=Math.atan2(t[9],t[10]),this.y=Math.atan2(-t[8],Math.sqrt(t[9]*t[9]+t[10]*t[10])),this.z=Math.atan2(t[4],t[0]),this}reorder(t){return this.order=t,this}clone(){return new o(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}};var V=class extends T{ready;constructor(){super(),this.ready=!1}};var st=class extends V{type;name;vertexShader;fragmentShader;gl;program;constructor(t){super(),this.type=t.type,this.name=t?.name??"WebGL2Shader",this.vertexShader=t.vertexShader,this.fragmentShader=t.fragmentShader,this.gl=null,this.program=null}getUniform(t){return!this.gl||!this.program||!this.ready?null:this.gl.getUniformLocation(this.program,t)}getAttribute(t){return!this.gl||!this.program||!this.ready?-1:this.gl.getAttribLocation(this.program,t)}async load(t){if(this.type==="url"){let[i,n]=await Promise.allSettled([fetch(this.vertexShader),fetch(this.fragmentShader)]);if(i.status==="rejected"){let h=new Error(i.reason);throw this.ready=!1,this.dispatchEvent("onerror",h),h}if(n.status==="rejected"){let h=new Error(n.status);throw this.ready=!1,this.dispatchEvent("onerror",h),h}this.vertexShader=await i.value.text(),this.fragmentShader=await n.value.text()}let s=t.createShader(t.VERTEX_SHADER);if(!s)throw new Error("Failed to create vertex shader!");if(t.shaderSource(s,this.vertexShader),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){let i=t.getShaderInfoLog(s),n=new Error(`[Vertex Shader]: "${i}"`);throw this.program=null,this.ready=!1,this.dispatchEvent("onerror",n),n}let e=t.createShader(t.FRAGMENT_SHADER);if(!e)throw new Error("Failed to create fragment shader!");if(t.shaderSource(e,this.fragmentShader),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS)){let i=t.getShaderInfoLog(e),n=new Error(`[Fragment Shader]: "${i}"`);throw this.program=null,this.ready=!1,this.dispatchEvent("onerror",n),n}let r=t.createProgram();if(t.attachShader(r,s),t.attachShader(r,e),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS)){let i=t.getProgramInfoLog(r),n=new Error(`[Link Shader]: "${i}"`);throw this.program=null,this.ready=!1,this.dispatchEvent("onerror",n),n}this.program=r,this.dispatchEvent("onload",r),this.gl=t,this.ready=!0}};var rt=class o extends Array{constructor(t,s,e,r=1){super(4),this[0]=t,this[1]=s,this[2]=e,this[3]=r}get r(){return this[0]}get g(){return this[1]}get b(){return this[2]}get a(){return this[3]}set r(t){this[0]=t}set g(t){this[1]=t}set b(t){this[2]=t}set a(t){this[3]=t}set(t,s,e,r=1){return this[0]=t,this[1]=s,this[2]=e,this[3]=r,this}setFromArray(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this}setFromVector3(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this}setFromVector4(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}setRgb(t,s,e,r=1){return this[0]=t,this[1]=s,this[2]=e,this[3]=r,this}setHex(t,s=1){return this[3]=s,this[2]=t&255,this[1]=(t&65280)>>8,this[0]=(t&16711680)>>16,this}add(t){return this[0]+=t[0],this[1]+=t[1],this[2]+=t[2],this[3]+=t[3],this}subtract(t){return this[0]-=t[0],this[1]-=t[1],this[2]-=t[2],this[3]-=t[3],this}multiply(t){return this[0]*=t[0],this[1]*=t[1],this[2]*=t[2],this[3]*=t[3],this}divide(t){return this[0]/=t[0],this[1]/=t[1],this[2]/=t[2],this[3]/=t[3],this}addScalar(t){return this[0]+=t,this[1]+=t,this[2]+=t,this[3]+=t,this}subtractScalar(t){return this[0]-=t,this[1]-=t,this[2]-=t,this[3]-=t,this}multiplyScalar(t){return this[0]*=t,this[1]*=t,this[2]*=t,this[3]*=t,this}divideScalar(t){return this[0]/=t,this[1]/=t,this[2]/=t,this[3]/=t,this}normalize(){let t=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]);return t===0?(this[0]=0,this[1]=0,this[2]=0):(this[0]/=t,this[1]/=t,this[2]/=t),this}floor(){return this[0]=Math.floor(this[0]),this[1]=Math.floor(this[1]),this[2]=Math.floor(this[2]),this[3]=Math.floor(this[3]),this}ceil(){return this[0]=Math.ceil(this[0]),this[1]=Math.ceil(this[1]),this[2]=Math.ceil(this[2]),this[3]=Math.ceil(this[3]),this}round(){return this[0]=Math.round(this[0]),this[1]=Math.round(this[1]),this[2]=Math.round(this[2]),this[3]=Math.round(this[3]),this}clamp(t,s){return this[0]=Math.max(t.x,Math.min(this[0],s.x)),this[1]=Math.max(t.y,Math.min(this[1],s.y)),this[2]=Math.max(t.z,Math.min(this[2],s.z)),this[3]=Math.max(t.w,Math.min(this[3],s.w)),this}equals(t){return this[0]===t[0]&&this[1]===t[1]&&this[2]===t[2]&&this[3]===t[3]}lerp(t,s){return this[0]+=(t[0]-this[0])*s,this[1]+=(t[1]-this[1])*s,this[2]+=(t[2]-this[2])*s,this}clone(){return new o(this[0],this[1],this[2],this[3])}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this}};var it=class extends V{name;vertexCode;fragmentCode;program;uniforms;attributes;preloaded;ready;error;constructor(t){if(super(),this.name=t?.name||"Shader",this.vertexCode=null,this.fragmentCode=null,this.uniforms={},this.attributes={},this.program=null,this.preloaded=!1,this.ready=!1,this.error=null,this._setUniformsAndAttributes(t),t.type==="source-code")this.vertexCode=t.vertexShader,this.fragmentCode=t.fragmentShader;else if(t.type==="url")this._setSourceCodeFromURL(t.vertexShader,t.fragmentShader);else throw Error("Invalid Shader Loader options!")}static loadAll(t,s,e=!1){for(let r=0;r<s.length;r++)s[r].load(t,e)}async _setSourceCodeFromURL(t,s){let[e,r]=await Promise.allSettled([fetch(t),fetch(s)]);if(e.status==="rejected"||!e.value.ok)return this.ready=!1,this.error=new Error("Failed to fetch vertex shader!"),this.dispatchEvent("onerror",this.error),void console.error(this.error);if(r.status==="rejected"||!r.value.ok)return this.ready=!1,this.error=new Error("Failed to fetch fragment shader!"),this.dispatchEvent("onerror",this.error),void console.error(this.error);let[i,n]=await Promise.allSettled([e.value.text(),r.value.text()]);if(i.status==="rejected")return this.ready=!1,this.error=new Error("Failed to parse text for vertex shader!"),this.dispatchEvent("onerror",this.error),void console.error(this.error);if(n.status==="rejected")return this.ready=!1,this.error=new Error("Failed to parse text for fragment shader!"),this.dispatchEvent("onerror",this.error),void console.error(this.error);this.vertexCode=i.value,this.fragmentCode=n.value}_setUniformsAndAttributes(t){if(Array.isArray(t.uniforms))for(let s=0;s<t.uniforms.length;s++){let e=t.uniforms[s];this.uniforms[e]=null}if(Array.isArray(t.attributes))for(let s=0;s<t.attributes.length;s++){let e=t.attributes[s];this.attributes[e]=-1}}load(t,s=!1){if(!s&&this.ready&&this.program&&!this.error)return;let e=t.createShader(t.VERTEX_SHADER);if(!e)return void console.error("Failed to create vertex shader!");if(this.vertexCode===null)return void console.error("Vertex shader code is not a string!");if(this.fragmentCode===null)return void console.error("Fragment shader code is not a string!");if(t.shaderSource(e,this.vertexCode),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS)){let c=t.getShaderInfoLog(e),a=new Error(`[Vertex Shader]: "${c}"`);return this.program=null,this.ready=!1,this.error=a,this.dispatchEvent("onerror",a),void console.error(a)}let r=t.createShader(t.FRAGMENT_SHADER);if(!r)return void console.error("Failed to create fragment shader!");if(t.shaderSource(r,this.fragmentCode),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){let c=t.getShaderInfoLog(r),a=new Error(`[Fragment Shader]: "${c}"`);return this.program=null,this.ready=!1,this.error=a,this.dispatchEvent("onerror",a),void console.error(a)}let i=t.createProgram();if(t.attachShader(i,e),t.attachShader(i,r),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){let c=t.getProgramInfoLog(i),a=new Error(`[Link Shader]: "${c}"`);return this.program=null,this.ready=!1,this.error=a,this.dispatchEvent("onerror",a),void console.error(a)}let n=t.getProgramParameter(i,t.ACTIVE_UNIFORMS);for(let c=0;c<n;c++){let a=t.getActiveUniform(i,c);a!==null&&(this.uniforms[a.name]=t.getUniformLocation(i,a.name))}let h=t.getProgramParameter(i,t.ACTIVE_ATTRIBUTES);for(let c=0;c<h;c++){let a=t.getActiveAttrib(i,c);a!==null&&(this.attributes[a.name]=t.getAttribLocation(i,a.name))}this.program=i,this.ready=!0,this.error=null,this.dispatchEvent("onload",this.program)}};var nt=class extends V{img;constructor(){super(),this.img=new Image}load(t,s,e){this.img.src=t,this.img.onload=()=>{s&&s(this.img),this.dispatchEvent("onload",this.img),this.ready=!0},this.img.onerror=r=>{e&&e(r),this.dispatchEvent("onerror",r),this.ready=!1}}};var ht=class{uuid;name;type;matrixAutoUpdate;matrixNeedsUpdate;autoUpdate;needsUpdate;constructor(){this.uuid=et(),this.name="",this.type="",this.matrixAutoUpdate=!1,this.matrixNeedsUpdate=!1,this.autoUpdate=!1,this.needsUpdate=!1}};var ot=class extends T{element;position;down;drag;offset;mouseScroll;isPointerDragging;isPointerDown;isPointerUp;devicePixelRatio;clipSpace;constructor(t,s){super(["onpointerup","onpointermove","onpointerdown","onmousescroll"]),this.element=t,this.position=new M(0,0),this.down=new M(0,0),this.drag=new M(0,0),this.offset=new M(0,0),this.mouseScroll=0,this.isPointerDragging=!1,this.isPointerDown=!1,this.isPointerUp=!0,this.devicePixelRatio=s?.devicePixelRatio??1,this.clipSpace=s?.clipSpace??"dom",t&&this.load(t)}_setPosition(t,s,e){if(!this.element)return;let r=this.devicePixelRatio*(t.clientX-s.left+e.x),i=this.devicePixelRatio*(t.clientY-s.top+e.y),n=s.width/2*this.devicePixelRatio,h=s.height/2*this.devicePixelRatio;switch(this.clipSpace){case"normalized-device-coordinates":{r=(r-n)/n,i=(h-i)/h;break}case"normalized-dom":{r=(r-n)/n,i=(i-h)/h;break}case"dom":{r=r-n,i=i-h;break}default:throw Error("Clip space not defined!")}this.position.set(r,i)}dispose(){return this.element?(this.position.set(0,0),this.down.set(0,0),this.drag.set(0,0),this.offset.set(0,0),this.element.onpointerdown=null,this.element.onpointermove=null,this.element.onpointerup=null,this.element.onwheel=null,this.element=null,!0):!1}load(t){return this.element=t,t.onwheel=s=>{this.mouseScroll+=s.deltaY,this.dispatchEvent("onmousescroll",this)},t.onpointerdown=s=>{this.isPointerDown=!0,this.isPointerUp=!1;let e=t.getBoundingClientRect();this._setPosition(s,e,this.offset),this.drag.set(0,0),!this.isPointerDragging&&this.isPointerDown&&(this.isPointerDragging=!0,this.down.copy(this.position)),this.dispatchEvent("onpointerdown",this)},t.onpointermove=s=>{let e=t.getBoundingClientRect();this._setPosition(s,e,this.offset),this.isPointerDown&&this.drag.set(this.position.x-this.down.x,this.position.y-this.down.y),this.dispatchEvent("onpointermove",this)},t.onpointerup=s=>{this.isPointerDown=!1,this.isPointerUp=!0,this.isPointerDragging&&(this.isPointerDragging=!1,this.down.set(0,0),this.drag.set(0,0)),this.dispatchEvent("onpointerup",this)},!0}};var at=class{element;camera;_initialRotatePosition;rotatePosition;_initialZoom;zoomDistance;drag;rotateSpeed;panSpeed;zoomSpeed;minZoom;maxZoom;enableOrbit;enableZoom;constructor(t,s){this.element=t,this.camera=s,this._initialRotatePosition=new M(0,0),this.rotatePosition=new M(0,0),this._initialZoom=0,this.zoomDistance=0,this.drag=new M(0,0),this.rotateSpeed=1,this.panSpeed=1,this.zoomSpeed=1,this.minZoom=-5,this.maxZoom=10,this.enableOrbit=!0,this.enableZoom=!0}dispose(){return this.element?(this.element=null,this._initialRotatePosition.set(0,0),this.rotatePosition.set(0,0),this.drag=new M(0,0),!0):!1}orbit(t){if(!this.enableOrbit)return;if(this.rotatePosition.copy(t.position),!this.element||t.isPointerUp){this.drag.set(0,0),this._initialRotatePosition.copy(this.rotatePosition);return}this.drag.x=this.rotatePosition.x-this._initialRotatePosition.x,this.drag.y=this.rotatePosition.y-this._initialRotatePosition.y;let{width:s,height:e}=this.element.getBoundingClientRect(),r=this.camera.position.distanceTo(this.camera.target),i=this.drag.x/s*r*this.rotateSpeed,n=this.drag.y/e*r*this.rotateSpeed,h=new z(this.camera.position.x,this.camera.position.y,this.camera.position.z).subtract(this.camera.target),c=Math.sqrt(h.x*h.x+h.y*h.y+h.z*h.z),a=Math.atan2(h.z,h.x)+i,m=Math.asin(h.y/c)+n;this.camera.position.set(c*Math.cos(m)*Math.cos(a),c*Math.sin(m),c*Math.cos(m)*Math.sin(a)).add(this.camera.target),this.camera.lookAt(this.camera.target),this._initialRotatePosition.copy(this.rotatePosition)}zoom(t){if(!this.enableZoom||!this.element||this._initialZoom===t.mouseScroll)return;let e=(this._initialZoom-t.mouseScroll>0?-1:1)*this.zoomSpeed;if(this.zoomDistance+e<this.minZoom||this.zoomDistance+e>this.maxZoom){this._initialZoom=t.mouseScroll;return}this.zoomDistance+=e;let r=this.camera.getWorldDirection().multiplyScalar(e);this.camera.position.add(r),this._initialZoom=t.mouseScroll}};var ct=class extends T{element;keys;lowerCase;constructor(t,s=!1){super(["onkeyup","onkeydown"]),this.element=t,this.keys=new Set,this.lowerCase=s,t&&this.load(t)}dispose(){return this.element?(window.onkeydown=null,window.onkeyup=null,this.element=null,this.keys.clear(),!0):!1}hasKey(t){return this.keys.has(t)}load(t){return this.element=t,this.keys.clear(),window.onkeydown=s=>{let e=this.lowerCase?s.key.toLowerCase():s.key;this.keys.has(e)||(this.keys.add(e),this.dispatchEvent("onkeydown",this))},window.onkeyup=s=>{let e=this.lowerCase?s.key.toLowerCase():s.key;this.keys.has(e)&&(this.keys.delete(e),this.dispatchEvent("onkeyup",this))},!0}};var R=class{rotation;target;autoUpdate;needsUpdate;enabled;constructor(){this.rotation=new Q,this.target=new z,this.autoUpdate=!1,this.needsUpdate=!1,this.enabled=!0}getWorldDirection(){return new z(this.rotationMatrix[8],this.rotationMatrix[9],this.rotationMatrix[10]).normalize()}};var mt=class extends R{position;projectionMatrix;rotationMatrix;fov;aspect;near;far;constructor(t,s,e,r){super(),this.position=new z,this.projectionMatrix=new P,this.rotationMatrix=new P,this.fov=t,this.aspect=s,this.near=e,this.far=r,this.updateProjectionMatrix()}lookAt(t,s=z.UP){let e=this.position.clone().subtract(t).normalize(),r=s.cross(e).normalize(),i=e.cross(r).normalize(),n=new P(r.x,r.y,r.z,0,i.x,i.y,i.z,0,e.x,e.y,e.z,0,0,0,0,1);return this.target.set(t.x,t.y,t.z),this.rotationMatrix.setFromMatrix4(n),this.rotation.setFromRotationMatrix(this.rotationMatrix),this}updateProjectionMatrix(){let t=this.fov*(Math.PI/180),s=1/Math.tan(t/2),e=1/(this.near-this.far);return this.projectionMatrix.set(s/this.aspect,0,0,0,0,s,0,0,0,0,(this.near+this.far)*e,-1,0,0,this.near*this.far*e*2,0),this.rotationMatrix.makeRotationFromEuler(this.rotation),this.needsUpdate=!1,this}};var ut=class extends R{position;projectionMatrix;rotationMatrix;left;right;top;bottom;aspect;near;far;zoom;constructor(t,s,e,r,i,n,h){super(),this.position=new z,this.projectionMatrix=new P,this.rotationMatrix=new P,this.left=t,this.right=s,this.top=e,this.bottom=r,this.aspect=i,this.near=n,this.far=h,this.zoom=1,this.updateProjectionMatrix()}lookAt(t,s=z.UP){let e=this.position.clone().subtract(t).normalize(),r=s.cross(e).normalize(),i=e.cross(r).normalize(),n=new P(r.x,r.y,r.z,0,i.x,i.y,i.z,0,e.x,e.y,e.z,0,0,0,0,1);return this.target.set(t.x,t.y,t.z),this.rotationMatrix.setFromMatrix4(n),this.rotation.setFromRotationMatrix(this.rotationMatrix),this}updateProjectionMatrix(t=!1){let s=this.right*this.aspect,e=this.left*this.aspect,r=(s-e)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),n=(s+e)/2,h=(this.top+this.bottom)/2,c=n-r,a=n+r,m=h+i,u=h-i,d=2/(a-c),p=2/(m-u),x=-(a+c)/(a-c),y=-(m+u)/(m-u),l=0,f=0;return t?(l=1/(this.far-this.near),f=this.far/(this.far-this.near)):(l=-2/(this.far-this.near),f=-(this.far+this.near)/(this.far-this.near)),this.projectionMatrix.set(d,0,0,x,0,p,0,y,0,0,l,f,0,0,0,1),this.rotationMatrix.makeRotationFromEuler(this.rotation),this}};var dt=class extends R{position;projectionMatrix;rotationMatrix;width;height;aspect;zoom;constructor(t,s,e,r=1){super(),this.position=new M,this.projectionMatrix=new L,this.rotationMatrix=new L,this.width=t,this.height=s,this.aspect=e,this.zoom=r,this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.width/2,s=-this.height/2,e=t+this.position.x,r=-s+this.position.y;return t*=this.zoom,s*=this.zoom,this.projectionMatrix.set(t/this.aspect,0,e,0,s,r,0,0,1),this}};export{R as Camera,dt as Camera2D,J as Canvas2DRenderer,tt as Clock,rt as Color,ht as Entity,Q as Euler,T as Events,nt as ImageLoader,ct as Keyboard,V as Loader,L as Matrix3,P as Matrix4,at as OrbitControls,ut as OrthographicCamera,mt as PerspectiveCamera,ot as Pointer,G as Quaternion,A as Renderer,W as Scene,it as ShaderLoader,M as Vector2,z as Vector3,q as Vector4,$ as WebGL2Renderer,st as WebGL2ShaderLoader,N as WebGPURenderer,ue as clamp,le as extendArray,et as generateUUID,de as lerp,me as randomFloat,ce as randomInt};
