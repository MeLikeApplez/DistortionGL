function mt(h,t){return new Promise(e=>{h.then(s=>{e([s,null])}).catch(s=>{console.error(t||s),e([null,t||s])})})}function dt(h,t){return Math.floor(Math.random()*(t-h+1)+h)}function xt(h,t){return Math.random()*(t-h)+h}function ft(h,t,e){return t<h?h:t>e?e:t}function yt(h,t,e){return h+(t-h)*e}var b=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function H(){let h=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,s=Math.random()*4294967295|0;return b[h&255]+b[h>>8&255]+b[h>>16&255]+b[h>>24&255]+"-"+b[t&255]+b[t>>8&255]+"-"+b[t>>16&15|64]+b[t>>24&255]+"-"+b[e&63|128]+b[e>>8&255]+"-"+b[e>>16&255]+b[e>>24&255]+b[s&255]+b[s>>8&255]+b[s>>16&255]+b[s>>24&255]}function pt(h,t){let e=h.constructor,s=e(h.length*t);for(let i=0;i<t;i++)for(let r=0;r<h.length;r++)s[h.length*i+r]=h[r];return s}var V=class{_listeners;constructor(t){if(this._listeners=new Map,Array.isArray(t))for(let e=0;e<t.length;e++)this._listeners.set(t[e],[])}createEvent(t){return this._listeners.set(t,[]),this}dispatchEvent(t,e){let s=this._listeners.get(t);if(!s)return!1;for(let i=0;i<s.length;i++)s[i].callback(e);return!0}listen(t,e){let s=this._listeners.get(t);if(!s)return new Error(`Unable to find event eventName: "${String(t)}"`);if(typeof e!="function")return new Error("Callback function is required!");let i=H();return s.push({uuid:i,callback:e}),i}};var B=class{events;animationId;startTime;fps;deltaTime;constructor(){this.events=new V(["onstart","onstop","onupdate"]),this.animationId=-1,this.startTime=-1,this.fps=0,this.deltaTime=0}start(){return this.startTime=-1,this.animationId=window.requestAnimationFrame(this.update.bind(this)),this.events.dispatchEvent("onstart",this),this.animationId}stop(){return window.cancelAnimationFrame(this.animationId),this.animationId=-1,this.startTime=-1,this.events.dispatchEvent("onstop",this),this.animationId}update(t){if(this.animationId=window.requestAnimationFrame(this.update.bind(this)),this.startTime===-1){this.startTime=t;return}this.deltaTime=(t-this.startTime)/1e3,this.fps=1/this.deltaTime,this.startTime=t,this.events.dispatchEvent("onupdate",this)}};var $=class{camera;children;enabled;constructor(t){this.camera=t,this.children=[],this.enabled=!0}add(t){this.children.push(...t)}remove(t){for(let e=0;e<t.length;e++){let s=t[e],i=this.children.findIndex(r=>r.uuid===s.uuid);i!==-1&&this.children.splice(i,1)}}dispose(t,...e){}load(t,...e){}render(t,...e){}};var O=class{scene;canvasElement;constructor(t){this.scene=null,this.canvasElement=t}setSize(t,e,s=1){this.canvasElement.width=t*s,this.canvasElement.height=e*s}render(t,e){}};var N=class extends O{gl;static isAvailable(t){return!!t.getContext("webgl2")}constructor(t,e={}){super(t),this.gl=t.getContext("webgl2",e)}render(t,e){t.render(this)}};var J=class h{x;y;z;w;constructor(t=0,e=0,s=0,i=0){this.x=t,this.y=e,this.z=s,this.w=i}set(t,e,s,i){return this.x=t,this.y=e,this.z=s,this.w=i,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}subtractScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}divideScalar(t){return this.x/=t,this.y/=t,this.z/=t,this.w/=t,this}distanceTo(t){let e=t.x-this.x,s=t.y-this.y,i=t.z-this.z,r=t.w-this.w;return Math.sqrt(e*e+s*s+i*i+r*r)}distanceToSquared(t){let e=t.x-this.x,s=t.y-this.y,i=t.z-this.z,r=t.w-this.w;return e*e+s*s+i*i+r*r}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(this.x,e.x)),this.y=Math.max(t.y,Math.min(this.y,e.y)),this.z=Math.max(t.z,Math.min(this.z,e.z)),this.w=Math.max(t.w,Math.min(this.w,e.w)),this}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return t===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x/=t,this.y/=t,this.z/=t,this.w/=t),this}applyFromMatrix4(t){let{x:e,y:s,z:i,w:r}=this;return this.x=t[0]*e+t[1]*s+t[2]*i+t[3]*r,this.y=t[4]*e+t[5]*s+t[6]*i+t[7]*r,this.z=t[8]*e+t[9]*s+t[10]*i+t[11]*r,this.w=t[12]*e+t[13]*s+t[14]*i+t[15]*r,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w}toArray(){return[this.x,this.y,this.z,this.w]}fromArray(t){return this.x=t[0],this.y=t[1],this.z=t[2],this.w=t[3],this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:return 0}}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}clone(){return new h(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}};var Q=class h{x;y;z;w;constructor(t=0,e=0,s=0,i=1){this.x=t,this.y=e,this.z=s,this.w=i}set(t,e,s,i){return this.x=t,this.y=e,this.z=s,this.w=i,this}setFromEuler(t){let{a:e,b:s,c:i}=t.getEulerByOrder(),r=Math.sin(e/2),o=Math.sin(s/2),n=Math.sin(i/2),u=Math.cos(e/2),a=Math.cos(s/2),c=Math.cos(i/2);return this.x=u*a*c+r*o*n,this.y=r*a*c-u*o*n,this.z=u*o*c+r*a*n,this.w=u*a*n-r*o*c,this}setFromAxisAngle(t,e){let s=e*.5,i=Math.sin(s);return new h(t.x*i,t.y*i,t.z*i,Math.cos(s))}identity(){return this.set(0,0,0,1),this}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return t===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x/=t,this.y/=t,this.z/=t,this.w/=t),this}conjugate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=this.w,this}multiply(t){return this.x=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,this.y=this.w*t.y-this.x*t.z+this.y*t.w+this.z*t.x,this.z=this.w*t.z+this.x*t.y-this.y*t.x+this.z*t.w,this.w=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z,this}clone(){return new h(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}};var S=class h{x;y;z;constructor(t=0,e=0,s=0){this.x=t,this.y=e,this.z=s}static UP=new h(0,1,0);set(t,e,s){return this.x=t,this.y=e,this.z=s,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}subtractScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}divideScalar(t){return this.x/=t,this.y/=t,this.z/=t,this}distanceTo(t){let e=t.x-this.x,s=t.y-this.y,i=t.z-this.z;return Math.sqrt(e*e+s*s+i*i)}distanceToSquared(t){let e=t.x-this.x,s=t.y-this.y,i=t.z-this.z;return e*e+s*s+i*i}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(this.x,e.x)),this.y=Math.max(t.y,Math.min(this.y,e.y)),this.z=Math.max(t.z,Math.min(this.z,e.z)),this}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return t===0?(this.x=0,this.y=0,this.z=0):(this.x/=t,this.y/=t,this.z/=t),this}applyFromMatrix3(t){let{x:e,y:s,z:i}=this;return this.x=t[0]*e+t[1]*s+t[2]*i,this.y=t[3]*e+t[4]*s+t[5]*i,this.z=t[6]*e+t[7]*s+t[8]*i,this}applyQuaternion(t){let e=2*(t.x*this.y-t.w*this.x+t.y*this.z),s=2*(t.y*this.x-t.w*this.y+t.x*this.z),i=2*(t.z*this.x-t.w*this.z-t.x*this.y);return this.x=e,this.y=s,this.z=i,this}applyEuler(t){let e=new Q().setFromEuler(t);return this.applyQuaternion(e)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return new h(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}setFromCylindricalCoordinates(t,e,s){return this.x=t*Math.sin(s)*Math.cos(e),this.y=t*Math.sin(s)*Math.sin(e),this.z=t*Math.cos(s),this}equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}toArray(){return[this.x,this.y,this.z]}fromArray(t){return this.x=t[0],this.y=t[1],this.z=t[2],this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:return 0}}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}clone(){return new h(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}};var M=class h{x;y;constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}add(t){return this.x+=t.x,this.y+=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}divide(t){return this.x/=t.x,this.y/=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}subtractScalar(t){return this.x-=t,this.y-=t,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divideScalar(t){return this.x/=t,this.y/=t,this}distanceTo(t){let e=t.x-this.x,s=t.y-this.y;return Math.sqrt(e*e+s*s)}distanceToSquared(t){let e=t.x-this.x,s=t.y-this.y;return e*e+s*s}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(this.x,e.x)),this.y=Math.max(t.y,Math.min(this.y,e.y)),this}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y);return t===0?(this.x=0,this.y=0):(this.x/=t,this.y/=t),this}dot(t){return this.x*t.x+this.y*t.y}equals(t){return this.x===t.x&&this.y===t.y}rotateAround(t,e){let s=Math.cos(e),i=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*s-o*i+t.x,this.y=r*i+o*s+t.y,this}toArray(){return[this.x,this.y]}fromArray(t){return this.x=t[0],this.y=t[1],this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:return 0}}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}clone(){return new h(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}};var A=class h extends Array{constructor(t=1,e=0,s=0,i=0,r=0,o=1,n=0,u=0,a=0,c=0,m=1,l=0,x=0,f=0,y=0,d=1){super(16),this[0]=t,this[1]=e,this[2]=s,this[3]=i,this[4]=r,this[5]=o,this[6]=n,this[7]=u,this[8]=a,this[9]=c,this[10]=m,this[11]=l,this[12]=x,this[13]=f,this[14]=y,this[15]=d}set(t,e,s,i,r,o,n,u,a,c,m,l,x,f,y,d){return this[0]=t,this[1]=e,this[2]=s,this[3]=i,this[4]=r,this[5]=o,this[6]=n,this[7]=u,this[8]=a,this[9]=c,this[10]=m,this[11]=l,this[12]=x,this[13]=f,this[14]=y,this[15]=d,this}setFromMatrix4(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}makeTranslation(t,e,s){return this.set(1,0,0,t,0,1,0,e,0,0,1,s,0,0,0,1),this}translate(t,e,s){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,t,e,s,1),this}makeScale(t,e,s){return this.set(t,0,0,0,0,e,0,0,0,0,s,0,0,0,0,1),this}makeRotationX(t){let e=Math.sin(t),s=Math.cos(t);return this.set(1,0,0,0,0,s,-e,0,0,e,s,0,0,0,0,1),this}makeRotationY(t){let e=Math.sin(t),s=Math.cos(t);return this.set(s,0,e,0,0,1,0,0,-e,0,s,0,0,0,0,1),this}makeRotationZ(t){let e=Math.sin(t),s=Math.cos(t);return this.set(s,-e,0,0,e,s,0,0,0,0,1,0,0,0,0,1),this}makeRotationFromEuler(t){let{s1:e,s2:s,s3:i,c1:r,c2:o,c3:n}=t.getEulerByOrderTrig();switch(t.order){case"XZX":return this.set(o,-n*s,s*i,0,r*s,r*o*n-e*i,-n*e-r*o*i,0,e*s,r*i+o*n*e,r*n-o*e*i,0,0,0,0,1);case"XYX":return this.set(o,s*i,n*s,0,e*s,r*n-o*e*i,-(r*i)-o*n*e,0,-r*s,n*e+r*o*i,r*o*n-e*i,0,0,0,0,1);case"YXY":return this.set(r*n-o*e*i,e*s,r*i+o*n*e,0,s*i,o,-n*s,0,-n*e- -r*o*i,r*s,r*o*n-e*i,0,0,0,0,1);case"YZY":return this.set(r*o*n-e*i,-r*s,n*e+r*o*i,0,n*s,o,s*i,0,-r*i-o*n*e,e*s,r*n-o*e*i,0,0,0,0,1);case"ZYZ":return this.set(r*o*n-e*i,-n*e-r*o*i,r*s,0,r*i+o*n*e,r*n-o*e*i,e*s,0,-n*s,s*i,o,0,0,0,0,1);case"ZXZ":return this.set(r*n-o*e*i,-r*i-o*n*e,e*s,0,n*e+r*o*i,r*o*n-e*i,-r*s,0,s*i,n*s,o,0,0,0,0,1);case"XZY":return this.set(o*n,-s,o*i,0,e*i+r*n*s,r*o,r*s*i-n*e,0,n*e*s-r*i,o*e,r*n+e*s*i,0,0,0,0,1);case"XYZ":return this.set(o*n,-o*i,s,0,r*i+n*e*s,r*n-e*s*i,-o*e,0,e*i-r*n*s,n*e+r*s*i,r*o,0,0,0,0,1);case"YXZ":return this.set(r*n+e*s*i,n*e*s-r*i,o*e,0,o*i,o*n,-s,0,r*s*i-n*e,r*n*s+e*i,r*o,0,0,0,0,1);case"YZX":return this.set(r*o,e*i-r*n*s,n*e+r*s*i,0,s,o*n,-o*i,0,-o*e,r*i+n*e*s,r*n-e*s*i,0,0,0,0,1);case"ZYX":return this.set(r*o,r*s*i-n*e,e*i+r*n*s,0,o*e,r*n+e*s*i,n*e*s-r*i,0,-s,o*i,o*n,0,0,0,0,1);case"ZXY":return this.set(r*n-e*s*i,-r*e,r*i+n*e*s,0,n*e+r*s*i,r*o,e*i-r*n*s,0,-o*i,s,o*n,0,0,0,0,1)}return null}makeRotationFromQuaternion(t){let e=t.x*t.x,s=t.y*t.y,i=t.z*t.z,r=t.x*t.y,o=t.x*t.z,n=t.y*t.z,u=t.x*t.w,a=t.y*t.w,c=t.z*t.w,m=1-(2*s-2*i),l=2*r-2*c,x=2*o+2*a,f=2*r+2*c,y=1-(2*e-2*i),d=2*n-2*u,p=2*o-2*a,z=2*n+2*u,w=1-(2*e-2*s);return this.set(m,l,x,0,f,y,d,0,p,z,w,0,0,0,0,1)}multiply(t){return this.multiplyMatrices(this,t),this}multiplyMatrices(t,e){let s=t,i=e,r=this,o=s[0],n=s[4],u=s[8],a=s[12],c=s[1],m=s[5],l=s[9],x=s[13],f=s[2],y=s[6],d=s[10],p=s[14],z=s[3],w=s[7],P=s[11],g=s[15],E=i[0],T=i[4],U=i[8],v=i[12],C=i[1],k=i[5],F=i[9],Z=i[13],D=i[2],I=i[6],j=i[10],G=i[14],W=i[3],X=i[7],Y=i[11],_=i[15];return r[0]=o*E+n*C+u*D+a*W,r[4]=o*T+n*k+u*I+a*X,r[8]=o*U+n*F+u*j+a*Y,r[12]=o*v+n*Z+u*G+a*_,r[1]=c*E+m*C+l*D+x*W,r[5]=c*T+m*k+l*I+x*X,r[9]=c*U+m*F+l*j+x*Y,r[13]=c*v+m*Z+l*G+x*_,r[2]=f*E+y*C+d*D+p*W,r[6]=f*T+y*k+d*I+p*X,r[10]=f*U+y*F+d*j+p*Y,r[14]=f*v+y*Z+d*G+p*_,r[3]=z*E+w*C+P*D+g*W,r[7]=z*T+w*k+P*I+g*X,r[11]=z*U+w*F+P*j+g*Y,r[15]=z*v+w*Z+P*G+g*_,this}multiplyScalar(t){for(let e=0;e<this.length;e++)this[e]*=t;return this}inverse(){let e=new h,s=this;e[0]=s[5]*s[10]*s[15]-s[5]*s[14]*s[11]-s[6]*s[9]*s[15]+s[6]*s[13]*s[11]+s[7]*s[9]*s[14]-s[7]*s[13]*s[10],e[1]=-s[1]*s[10]*s[15]+s[1]*s[14]*s[11]+s[2]*s[9]*s[15]-s[2]*s[13]*s[11]-s[3]*s[9]*s[14]+s[3]*s[13]*s[10],e[2]=s[1]*s[6]*s[15]-s[1]*s[14]*s[7]-s[2]*s[5]*s[15]+s[2]*s[13]*s[7]+s[3]*s[5]*s[14]-s[3]*s[13]*s[6],e[3]=-s[1]*s[6]*s[11]+s[1]*s[10]*s[7]+s[2]*s[5]*s[11]-s[2]*s[9]*s[7]-s[3]*s[5]*s[10]+s[3]*s[9]*s[6],e[4]=-s[4]*s[10]*s[15]+s[4]*s[14]*s[11]+s[6]*s[8]*s[15]-s[6]*s[12]*s[11]-s[7]*s[8]*s[14]+s[7]*s[12]*s[10],e[5]=s[0]*s[10]*s[15]-s[0]*s[14]*s[11]-s[2]*s[8]*s[15]+s[2]*s[12]*s[11]+s[3]*s[8]*s[14]-s[3]*s[12]*s[10],e[6]=-s[0]*s[6]*s[15]+s[0]*s[14]*s[7]+s[2]*s[4]*s[15]-s[2]*s[12]*s[7]-s[3]*s[4]*s[14]+s[3]*s[12]*s[6],e[7]=s[0]*s[6]*s[11]-s[0]*s[10]*s[7]-s[2]*s[4]*s[11]+s[2]*s[8]*s[7]+s[3]*s[4]*s[10]-s[3]*s[8]*s[6],e[8]=s[4]*s[9]*s[15]-s[4]*s[13]*s[11]-s[5]*s[8]*s[15]+s[5]*s[12]*s[11]+s[7]*s[8]*s[13]-s[7]*s[12]*s[9],e[9]=-s[0]*s[9]*s[15]+s[0]*s[13]*s[11]+s[1]*s[8]*s[15]-s[1]*s[12]*s[11]-s[3]*s[8]*s[13]+s[3]*s[12]*s[9],e[10]=s[0]*s[5]*s[15]-s[0]*s[13]*s[7]-s[1]*s[4]*s[15]+s[1]*s[12]*s[7]+s[3]*s[4]*s[13]-s[3]*s[12]*s[5],e[11]=-s[0]*s[5]*s[11]+s[0]*s[9]*s[7]+s[1]*s[4]*s[11]-s[1]*s[8]*s[7]-s[3]*s[4]*s[9]+s[3]*s[8]*s[5],e[12]=-s[4]*s[9]*s[14]+s[4]*s[13]*s[10]+s[5]*s[8]*s[14]-s[5]*s[12]*s[10]-s[6]*s[8]*s[13]+s[6]*s[12]*s[9],e[13]=s[0]*s[9]*s[14]-s[0]*s[13]*s[10]-s[1]*s[8]*s[14]+s[1]*s[12]*s[10]+s[2]*s[8]*s[13]-s[2]*s[12]*s[9],e[14]=-s[0]*s[5]*s[14]+s[0]*s[13]*s[6]+s[1]*s[4]*s[14]-s[1]*s[12]*s[6]-s[2]*s[4]*s[13]+s[2]*s[12]*s[5],e[15]=s[0]*s[5]*s[10]-s[0]*s[9]*s[6]-s[1]*s[4]*s[10]+s[1]*s[8]*s[6]+s[2]*s[4]*s[9]-s[2]*s[8]*s[5];let i=s[0]*e[0]+s[1]*e[4]+s[2]*e[8]+s[3]*e[12];for(var r=0;r<16;r++)e[r]/=i;return this.set(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),this}compose(t,e,s){let i=this,r=e.x,o=e.y,n=e.z,u=e.w,a=r+r,c=o+o,m=n+n,l=r*a,x=r*c,f=r*m,y=o*c,d=o*m,p=n*m,z=u*a,w=u*c,P=u*m,g=s.x,E=s.y,T=s.z;return i[0]=(1-(y+p))*g,i[1]=(x+P)*g,i[2]=(f-w)*g,i[3]=0,i[4]=(x-P)*E,i[5]=(1-(l+p))*E,i[6]=(d+z)*E,i[7]=0,i[8]=(f+w)*T,i[9]=(d-z)*T,i[10]=(1-(l+y))*T,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}clone(){return new h(...this)}copy(t){return this.set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}};var q=class h extends Array{constructor(t=1,e=0,s=0,i=0,r=1,o=0,n=0,u=0,a=1){super(9),this[0]=t,this[1]=e,this[2]=s,this[3]=i,this[4]=r,this[5]=o,this[6]=n,this[7]=u,this[8]=a}set(t,e,s,i,r,o,n,u,a){return this[0]=t,this[1]=e,this[2]=s,this[3]=i,this[4]=r,this[5]=o,this[6]=n,this[7]=u,this[8]=a,this}setFromMatrix3(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}makeRotation(t){let e=Math.sin(t),s=Math.cos(t);return this.set(s,-e,0,e,s,0,0,0,1),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}translate(t,e){return this.set(1,0,0,0,1,0,t,e,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}multiply(t){return this.multiplyMatrices(this,t),this}multiplyMatrices(t,e){let s=t,i=e,r=this,o=s[0],n=s[3],u=s[6],a=s[1],c=s[4],m=s[7],l=s[2],x=s[5],f=s[8],y=i[0],d=i[3],p=i[6],z=i[1],w=i[4],P=i[7],g=i[2],E=i[5],T=i[8];return r[0]=o*y+n*z+u*g,r[3]=o*d+n*w+u*E,r[6]=o*p+n*P+u*T,r[1]=a*y+c*z+m*g,r[4]=a*d+c*w+m*E,r[7]=a*p+c*P+m*T,r[2]=l*y+x*z+f*g,r[5]=l*d+x*w+f*E,r[8]=l*p+x*P+f*T,this}multiplyScalar(t){for(let e=0;e<this.length;e++)this[e]*=t;return this}inverse(){let[t,e,s,i,r,o,n,u,a]=this,c=r*a-u*o,m=o*n-i*a,l=i*u-n*r;return t*c+e*m+s*l===0?null:(this.set(c,s*u-e*a,e*o-s*r,m,t*a-s*n,i*s-t*o,l,n*e-t*u,t*r-i*e),this)}compose(t,e,s){let i=Math.sin(e),r=Math.cos(e);return this.set(r*s.x,-i*s.y,t.x,i*s.x,r*s.y,t.y,0,0,1),this}clone(){return new h(...this)}copy(t){return this.set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]),this}};var K=class h{x;y;z;order;constructor(t=0,e=0,s=0){this.x=t,this.y=e,this.z=s,this.order="XYZ"}set(t,e,s,i){return this.x=t,this.y=e,this.z=s,this.order=i||"XYZ",this}setFromQuaternion(t){let e=2*(t.w*t.x+t.y*t.z),s=1-2*(t.x*t.x+t.y*t.y);this.x=Math.atan2(e,s);let i=2*(t.w*t.y-t.x*t.z),r=Math.sqrt(1+i),o=Math.sqrt(1-i);this.y=2*Math.atan2(r,o)-Math.PI/2;let n=2*(t.w*t.z+t.x*t.y),u=1-2*(t.y*t.y+t.z*t.z);return this.z=Math.atan2(n,u),this}getEulerByOrder(){let t=this.order[0]==="X"?this.x:this.order[0]==="Y"?this.y:this.order[0]==="Z"?this.z:0,e=this.order[1]==="X"?this.x:this.order[1]==="Y"?this.y:this.order[1]==="Z"?this.z:0,s=this.order[2]==="X"?this.x:this.order[2]==="Y"?this.y:this.order[2]==="Z"?this.z:0;return{a:t,b:e,c:s}}getEulerByOrderTrig(){let{a:t,b:e,c:s}=this.getEulerByOrder(),i=Math.sin(t),r=Math.sin(e),o=Math.sin(s),n=Math.cos(t),u=Math.cos(e),a=Math.cos(s);return{s1:i,s2:r,s3:o,c1:n,c2:u,c3:a}}setFromRotationMatrix(t){return this.x=Math.atan2(t[9],t[10]),this.y=Math.atan2(-t[8],Math.sqrt(t[9]*t[9]+t[10]*t[10])),this.z=Math.atan2(t[4],t[0]),this}reorder(t){return this.order=t,this}clone(){return new h(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}};var tt=class h extends Array{constructor(t,e,s,i=1){super(4),this[0]=t,this[1]=e,this[2]=s,this[3]=i}get r(){return this[0]}get g(){return this[1]}get b(){return this[2]}get a(){return this[3]}set r(t){this[0]=t}set g(t){this[1]=t}set b(t){this[2]=t}set a(t){this[3]=t}set(t,e,s,i=1){return this[0]=t,this[1]=e,this[2]=s,this[3]=i,this}setFromArray(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this}setFromVector3(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this}setFromVector4(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}setRgb(t,e,s,i=1){return this[0]=t,this[1]=e,this[2]=s,this[3]=i,this}setHex(t,e=1){return this[3]=e,this[2]=t&255,this[1]=(t&65280)>>8,this[0]=(t&16711680)>>16,this}add(t){return this[0]+=t[0],this[1]+=t[1],this[2]+=t[2],this[3]+=t[3],this}subtract(t){return this[0]-=t[0],this[1]-=t[1],this[2]-=t[2],this[3]-=t[3],this}multiply(t){return this[0]*=t[0],this[1]*=t[1],this[2]*=t[2],this[3]*=t[3],this}divide(t){return this[0]/=t[0],this[1]/=t[1],this[2]/=t[2],this[3]/=t[3],this}addScalar(t){return this[0]+=t,this[1]+=t,this[2]+=t,this[3]+=t,this}subtractScalar(t){return this[0]-=t,this[1]-=t,this[2]-=t,this[3]-=t,this}multiplyScalar(t){return this[0]*=t,this[1]*=t,this[2]*=t,this[3]*=t,this}divideScalar(t){return this[0]/=t,this[1]/=t,this[2]/=t,this[3]/=t,this}normalize(){let t=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]);return t===0?(this[0]=0,this[1]=0,this[2]=0):(this[0]/=t,this[1]/=t,this[2]/=t),this}floor(){return this[0]=Math.floor(this[0]),this[1]=Math.floor(this[1]),this[2]=Math.floor(this[2]),this[3]=Math.floor(this[3]),this}ceil(){return this[0]=Math.ceil(this[0]),this[1]=Math.ceil(this[1]),this[2]=Math.ceil(this[2]),this[3]=Math.ceil(this[3]),this}round(){return this[0]=Math.round(this[0]),this[1]=Math.round(this[1]),this[2]=Math.round(this[2]),this[3]=Math.round(this[3]),this}clamp(t,e){return this[0]=Math.max(t.x,Math.min(this[0],e.x)),this[1]=Math.max(t.y,Math.min(this[1],e.y)),this[2]=Math.max(t.z,Math.min(this[2],e.z)),this[3]=Math.max(t.w,Math.min(this[3],e.w)),this}equals(t){return this[0]===t[0]&&this[1]===t[1]&&this[2]===t[2]&&this[3]===t[3]}lerp(t,e){return this[0]+=(t[0]-this[0])*e,this[1]+=(t[1]-this[1])*e,this[2]+=(t[2]-this[2])*e,this}clone(){return new h(this[0],this[1],this[2],this[3])}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this}};var L=class extends V{constructor(){super()}load(...t){}};var st=class extends L{constructor(){super()}};var et=class extends L{name;vertexCode;fragmentCode;program;uniforms;attributes;preloaded;ready;error;constructor(t){if(super(),this.name=t?.name||"Shader",this.vertexCode=null,this.fragmentCode=null,this.uniforms={},this.attributes={},this.program=null,this.preloaded=!1,this.ready=!1,this.error=null,this._setUniformsAndAttributes(t),t.type==="source-code")this.vertexCode=t.vertexShader,this.fragmentCode=t.fragmentShader;else if(t.type==="url")this._setSourceCodeFromURL(t.vertexShader,t.fragmentShader);else throw Error("Invalid Shader Loader options!")}static loadAll(t,e,s=!1){for(let i=0;i<e.length;i++)e[i].load(t,s)}async _setSourceCodeFromURL(t,e){let[s,i]=await Promise.allSettled([fetch(t),fetch(e)]);if(s.status==="rejected"||!s.value.ok)return this.ready=!1,this.error=new Error("Failed to fetch vertex shader!"),this.dispatchEvent("onerror",this.error),void console.error(this.error);if(i.status==="rejected"||!i.value.ok)return this.ready=!1,this.error=new Error("Failed to fetch fragment shader!"),this.dispatchEvent("onerror",this.error),void console.error(this.error);let[r,o]=await Promise.allSettled([s.value.text(),i.value.text()]);if(r.status==="rejected")return this.ready=!1,this.error=new Error("Failed to parse text for vertex shader!"),this.dispatchEvent("onerror",this.error),void console.error(this.error);if(o.status==="rejected")return this.ready=!1,this.error=new Error("Failed to parse text for fragment shader!"),this.dispatchEvent("onerror",this.error),void console.error(this.error);this.vertexCode=r.value,this.fragmentCode=o.value}_setUniformsAndAttributes(t){if(Array.isArray(t.uniforms))for(let e=0;e<t.uniforms.length;e++){let s=t.uniforms[e];this.uniforms[s]=null}if(Array.isArray(t.attributes))for(let e=0;e<t.attributes.length;e++){let s=t.attributes[e];this.attributes[s]=-1}}load(t,e=!1){if(!e&&this.ready&&this.program&&!this.error)return;let s=t.createShader(t.VERTEX_SHADER);if(!s)return void console.error("Failed to create vertex shader!");if(this.vertexCode===null)return void console.error("Vertex shader code is not a string!");if(this.fragmentCode===null)return void console.error("Fragment shader code is not a string!");if(t.shaderSource(s,this.vertexCode),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){let u=t.getShaderInfoLog(s),a=new Error(`[Vertex Shader]: "${u}"`);return this.program=null,this.ready=!1,this.error=a,this.dispatchEvent("onerror",a),void console.error(a)}let i=t.createShader(t.FRAGMENT_SHADER);if(!i)return void console.error("Failed to create fragment shader!");if(t.shaderSource(i,this.fragmentCode),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){let u=t.getShaderInfoLog(i),a=new Error(`[Fragment Shader]: "${u}"`);return this.program=null,this.ready=!1,this.error=a,this.dispatchEvent("onerror",a),void console.error(a)}let r=t.createProgram();if(t.attachShader(r,s),t.attachShader(r,i),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS)){let u=t.getProgramInfoLog(r),a=new Error(`[Link Shader]: "${u}"`);return this.program=null,this.ready=!1,this.error=a,this.dispatchEvent("onerror",a),void console.error(a)}let o=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let u=0;u<o;u++){let a=t.getActiveUniform(r,u);a!==null&&(this.uniforms[a.name]=t.getUniformLocation(r,a.name))}let n=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES);for(let u=0;u<n;u++){let a=t.getActiveAttrib(r,u);a!==null&&(this.attributes[a.name]=t.getAttribLocation(r,a.name))}this.program=r,this.ready=!0,this.error=null,this.dispatchEvent("onload",this.program)}};var it=class extends L{constructor(){super()}load(t,e,s){let i=new Image;i.src=t,i.onload=()=>{e&&e(i),this.dispatchEvent("onload",i)},i.onerror=r=>{s&&s(r),this.dispatchEvent("onerror",r)}}};var rt=class{uuid;name;type;position;scale;rotation;quaternion;matrix;matrixAutoUpdate;matrixNeedsUpdate;autoUpdate;needsUpdate;constructor(){this.uuid=H(),this.name="",this.type="",this.position=null,this.scale=null,this.rotation=null,this.quaternion=null,this.matrix=null,this.matrixAutoUpdate=!1,this.matrixNeedsUpdate=!1,this.autoUpdate=!1,this.needsUpdate=!1}dispose(t,...e){}update(t,...e){}render(t,...e){}};var nt=class{element;position;down;drag;offset;mouseScroll;isPointerDragging;isPointerDown;isPointerUp;devicePixelRatio;events;constructor(t,e=1){this.element=t,this.position=new M(0,0),this.down=new M(0,0),this.drag=new M(0,0),this.offset=new M(0,0),this.mouseScroll=0,this.isPointerDragging=!1,this.isPointerDown=!1,this.isPointerUp=!0,this.devicePixelRatio=e,this.events=new V(["onpointerup","onpointermove","onpointerdown","onmousescroll"]),t&&this.load(t)}dispose(){return this.element?(this.position.set(0,0),this.down.set(0,0),this.drag.set(0,0),this.offset.set(0,0),this.element.onpointerdown=null,this.element.onpointermove=null,this.element.onpointerup=null,this.element.onwheel=null,this.element=null,!0):!1}load(t){return this.element=t,t.onwheel=e=>{this.mouseScroll+=e.deltaY,this.events.dispatchEvent("onmousescroll",this)},t.onpointerdown=e=>{this.isPointerDown=!0,this.isPointerUp=!1;let s=t.getBoundingClientRect();this.position.set(this.devicePixelRatio*(e.clientX-s.left+this.offset.x),this.devicePixelRatio*(e.clientY-s.top+this.offset.y)),this.drag.set(0,0),!this.isPointerDragging&&this.isPointerDown&&(this.isPointerDragging=!0,this.down.copy(this.position)),this.events.dispatchEvent("onpointerdown",this)},t.onpointermove=e=>{let s=t.getBoundingClientRect();this.position.set(this.devicePixelRatio*(e.clientX-s.left+this.offset.x),this.devicePixelRatio*(e.clientY-s.top+this.offset.y)),this.isPointerDown&&this.drag.set(this.position.x-this.down.x,this.position.y-this.down.y),this.events.dispatchEvent("onpointermove",this)},t.onpointerup=e=>{this.isPointerDown=!1,this.isPointerUp=!0,this.isPointerDragging&&(this.isPointerDragging=!1,this.down.set(0,0),this.drag.set(0,0)),this.events.dispatchEvent("onpointerup",this)},!0}};var ot=class{element;camera;_initialRotatePosition;rotatePosition;_initialZoom;zoomDistance;drag;rotateSpeed;panSpeed;zoomSpeed;minZoom;maxZoom;enableOrbit;enableZoom;constructor(t,e){this.element=t,this.camera=e,this._initialRotatePosition=new M(0,0),this.rotatePosition=new M(0,0),this._initialZoom=0,this.zoomDistance=0,this.drag=new M(0,0),this.rotateSpeed=1,this.panSpeed=1,this.zoomSpeed=1,this.minZoom=0,this.maxZoom=10,this.enableOrbit=!0,this.enableZoom=!0}dispose(){return this.element?(this.element=null,this._initialRotatePosition.set(0,0),this.rotatePosition.set(0,0),this.drag=new M(0,0),!0):!1}orbit(t){if(!this.enableOrbit)return;if(this.rotatePosition.copy(t.position),!this.element||t.isPointerUp){this.drag.set(0,0),this._initialRotatePosition.copy(this.rotatePosition);return}this.drag.x=this.rotatePosition.x-this._initialRotatePosition.x,this.drag.y=this.rotatePosition.y-this._initialRotatePosition.y;let{width:e,height:s}=this.element.getBoundingClientRect(),i=this.camera.position.distanceTo(this.camera.target),r=this.drag.x/e*i*this.rotateSpeed,o=this.drag.y/s*i*this.rotateSpeed,n=new S(this.camera.position.x,this.camera.position.y,this.camera.position.z).subtract(this.camera.target),u=Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z),a=Math.atan2(n.z,n.x)+r,c=Math.asin(n.y/u)+o;this.camera.position.set(u*Math.cos(c)*Math.cos(a),u*Math.sin(c),u*Math.cos(c)*Math.sin(a)).add(this.camera.target),this.camera.lookAt(this.camera.target),this._initialRotatePosition.copy(this.rotatePosition)}zoom(t){if(!this.enableZoom||!this.element||this._initialZoom===t.mouseScroll)return;let s=(this._initialZoom-t.mouseScroll>0?-1:1)*this.zoomSpeed;if(this.zoomDistance+s<this.minZoom||this.zoomDistance+s>this.maxZoom){this._initialZoom=t.mouseScroll;return}this.zoomDistance+=s;let i=new S(this.camera.position.x,this.camera.position.y,this.camera.position.z).subtract(this.camera.target).normalize().multiplyScalar(s);this.camera.position.add(i),this._initialZoom=t.mouseScroll}};var R=class{position;rotation;projectionMatrix;target;autoUpdate;needsUpdate;constructor(){this.position=new S(0,0,0),this.rotation=new K,this.projectionMatrix=new A,this.target=new S(0,0,0),this.autoUpdate=!1,this.needsUpdate=!1}updateProjectionMatrix(){}render(t,...e){}};var ht=class extends R{zoom;resolution;minZoom;maxZoom;zoomScaleFactor;constructor(){super(),this.zoom=new M(1,1),this.resolution=new M(1,1),this.minZoom=.5,this.maxZoom=4,this.zoomScaleFactor=.1}updateProjectionMatrix(){this.projectionMatrix[0]=this.zoom.x/this.resolution.x,this.projectionMatrix[5]=this.zoom.y/this.resolution.y,this.needsUpdate=!1}render(t,e){t.gl.uniform3f(e.position,this.position.x,this.position.y,this.position.z),t.gl.uniformMatrix4fv(e.projection,!1,this.projectionMatrix)}};var at=class extends R{left;right;top;bottom;aspect;near;far;zoom;rotationMatrix;constructor(t,e,s,i,r,o,n){super(),this.left=t,this.right=e,this.top=s,this.bottom=i,this.aspect=r,this.near=o,this.far=n,this.zoom=1,this.rotationMatrix=new A,this.updateProjectionMatrix()}lookAt(t,e=S.UP){let s=this.position.clone().subtract(t).normalize(),i=e.cross(s).normalize(),r=s.cross(i).normalize(),o=new A(i.x,i.y,i.z,0,r.x,r.y,r.z,0,s.x,s.y,s.z,0,0,0,0,1);return this.target.set(t.x,t.y,t.z),this.rotationMatrix.setFromMatrix4(o),this.rotation.setFromRotationMatrix(this.rotationMatrix),this}updateProjectionMatrix(t=!1){let e=this.right*this.aspect,s=this.left*this.aspect,i=(e-s)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),o=(e+s)/2,n=(this.top+this.bottom)/2,u=o-i,a=o+i,c=n+r,m=n-r,l=2/(a-u),x=2/(c-m),f=-(a+u)/(a-u),y=-(c+m)/(c-m),d=0,p=0;return t?(d=1/(this.far-this.near),p=this.far/(this.far-this.near)):(d=-2/(this.far-this.near),p=-(this.far+this.near)/(this.far-this.near)),this.projectionMatrix.set(l,0,0,f,0,x,0,y,0,0,d,p,0,0,0,1),this.rotationMatrix.makeRotationFromEuler(this.rotation),this}render(t,e){t.gl.uniform3f(e.position,this.position.x,this.position.y,this.position.z),t.gl.uniformMatrix4fv(e.projection,!1,this.projectionMatrix),t.gl.uniformMatrix4fv(e.rotation,!1,this.rotationMatrix)}};var ut=class{element;keys;lowerCase;events;constructor(t,e=!1){this.element=t,this.keys=new Set,this.lowerCase=e,this.events=new V(["onkeyup","onkeydown"]),t&&this.load(t)}dispose(){return this.element?(window.onkeydown=null,window.onkeyup=null,this.element=null,this.keys.clear(),!0):!1}load(t){return this.element=t,this.keys.clear(),window.onkeydown=e=>{let s=this.lowerCase?e.key.toLowerCase():e.key;this.keys.has(s)||(this.keys.add(s),this.events.dispatchEvent("onkeydown",this))},window.onkeyup=e=>{let s=this.lowerCase?e.key.toLowerCase():e.key;this.keys.has(s)&&(this.keys.delete(s),this.events.dispatchEvent("onkeyup",this))},!0}};var ct=class extends R{fov;aspect;near;far;rotationMatrix;constructor(t,e,s,i){super(),this.fov=t,this.aspect=e,this.near=s,this.far=i,this.rotationMatrix=new A,this.updateProjectionMatrix()}lookAt(t,e=S.UP){let s=this.position.clone().subtract(t).normalize(),i=e.cross(s).normalize(),r=s.cross(i).normalize(),o=new A(i.x,i.y,i.z,0,r.x,r.y,r.z,0,s.x,s.y,s.z,0,0,0,0,1);return this.target.set(t.x,t.y,t.z),this.rotationMatrix.setFromMatrix4(o),this.rotation.setFromRotationMatrix(this.rotationMatrix),this}updateProjectionMatrix(){let t=this.fov*(Math.PI/180),e=1/Math.tan(t/2),s=1/(this.near-this.far);return this.projectionMatrix.set(e/this.aspect,0,0,0,0,e,0,0,0,0,(this.near+this.far)*s,-1,0,0,this.near*this.far*s*2,0),this.rotationMatrix.makeRotationFromEuler(this.rotation),this.needsUpdate=!1,this}render(t,e){t.gl.uniform3f(e.position,this.position.x,this.position.y,this.position.z),t.gl.uniformMatrix4fv(e.projection,!1,this.projectionMatrix),t.gl.uniformMatrix4fv(e.rotation,!1,this.rotationMatrix)}};export{R as Camera,ht as Camera2D,B as Clock,tt as Color,rt as Entity,K as Euler,V as Events,it as ImageLoader,ut as Keyboard,L as Loader,q as Matrix3,A as Matrix4,ot as OrbitControls,at as OrthographicCamera,ct as PerspectiveCamera,nt as Pointer,mt as Promisify,Q as Quaternion,O as Renderer,$ as Scene,et as ShaderLoader,M as Vector2,S as Vector3,J as Vector4,N as WebGL2Renderer,st as WebGL2ShaderLoader,ft as clamp,pt as extendArray,H as generateUUID,yt as lerp,xt as randomFloat,dt as randomInt};
